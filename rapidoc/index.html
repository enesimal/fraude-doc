<!doctype html>
<!-- Important: must specify, else rendering will be effected -->
<html lang="en">
    <head>
        <title>fraude-api-0.2</title>
        <!-- Important: The Custom element uses utf8 characters -->
        <meta charset='utf-8' />
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes">
    </head>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const docEl = document.getElementById('rapidoc');
            docEl.addEventListener('before-try', (e) => {
                e.detail.request.headers.append('AAA-BBB', 'CCC DDDD');
            });
        });
    </script>
    <body>
        <rapi-doc id='rapidoc' layout="row" show-components="true" sort-tags="false" sort-endpoints-by="method" nav-bg-color="#263238" nav-text-color="#ffffff" nav-item-spacing="compact" render-style="read" show-header="false" theme="light" use-path-in-nav-bar="true"><rapi-pdf id='rapi-pdf' hide-input="true" pdf-title="fraude-api-0.2" style="width: 122px;height: 26px;font-size: 15px;padding-bottom: 0px;padding-top: 5px;padding-left: 12px;margin-left: 12px" button-bg="#b44646"></rapi-pdf></rapi-doc>
        <script>
            const extract = function(v) {
                return decodeURIComponent(v.replace(/(?:^|.*;\s*)contextPath\s*=\s*([^;]*).*$|^.*$/, "$1"));
            }
            const cookie = extract(document.cookie)
            const contextPath = cookie === '' ? extract(window.location.search.substring(1)) : cookie
            const head = document.getElementsByTagName('head')[0];
            script(contextPath + "/rapidoc/res/rapipdf-min.js", head)
            const rapidocJs = script(contextPath + "/rapidoc/res/rapidoc-min.js", head, true)

            rapidocJs.onload = function () {

                const rapidoc = document.getElementById('rapidoc')
                if (contextPath !== '') {
                    rapidoc.addEventListener('spec-loaded', e => {
                        e.detail.tags.forEach(tag => tag.paths.forEach(path => path.path = contextPath + path.path));
                        rapidoc.requestUpdate();
                    });
                }
                rapidoc.setAttribute('spec-url', contextPath + '/swagger/fraude-api-0.2.yml');
                document.getElementById('rapi-pdf').setAttribute('spec-url', contextPath + '/swagger/fraude-api-0.2.yml');
            }

            function script(src, head, type, defer) {
                const el = document.createElement('script');
                el.src = src;
                if (defer !== undefined && defer) {
                    el.setAttribute("defer", "");
                }
                head.appendChild(el);
                return el;
            }
        </script>
    </body>
</html>
